---
import Layout from '../layouts/Layout.astro';
import { getAllNews, getLatestNews, CATEGORIES, formatDate } from '../utils/newsUtils.js';

const latestNews = await getLatestNews();
const allNews = await getAllNews();
const secondaryNews = allNews.slice(1, 4);
const additionalNews = allNews.slice(4, 7);
---

<Layout title="Corvus News ¬∑ Periodismo Independiente por la Soberan√≠a de M√©xico">
  <br/><br/>
  
  <!-- Hero Section -->
  <section class="hero">
    <div class="hero-badge">
      Periodismo Independiente ¬∑ Fundado en 2025
    </div>
    
    <h1 class="hero-title">
      Defendemos la Soberan√≠a<br>
      a Trav√©s del Periodismo
    </h1>
    
    <p class="hero-subtitle">
      Somos el medio independiente que M√©xico necesita. Investigamos, verificamos y publicamos 
      las historias que otros no se atreven a contar. Nuestro compromiso es con la verdad, 
      la transparencia y la defensa de la soberan√≠a nacional a trav√©s del periodismo riguroso.
    </p>
    
    <div class="hero-actions">
      <a href="/noticias/" class="btn btn-primary">
        Leer Noticias
      </a>
      <a href="#soberania" class="btn btn-secondary">
        Nuestra Misi√≥n
      </a>
    </div>
    
    <div class="trust-indicators">
      <div class="trust-card">
        <h3 class="trust-title">Periodismo Riguroso</h3>
        <p class="trust-desc">Cada investigaci√≥n pasa por m√∫ltiples verificaciones y an√°lisis de expertos</p>
      </div>
      <div class="trust-card">
        <h3 class="trust-title">Independencia Total</h3>
        <p class="trust-desc">Sin compromisos pol√≠ticos ni econ√≥micos. Solo la verdad al servicio de M√©xico</p>
      </div>
      <div class="trust-card">
        <h3 class="trust-title">Defensa de la Soberan√≠a</h3>
        <p class="trust-desc">Exponemos amenazas internas y externas que comprometen nuestra independencia nacional</p>
      </div>
      <div class="trust-card">
        <h3 class="trust-title">Transparencia Radical</h3>
        <p class="trust-desc">Publicamos nuestras fuentes, metodolog√≠a y proceso de verificaci√≥n</p>
      </div>
    </div>
  </section>

  <!-- Featured News Section -->
  <section class="news-section">
    <div class="section-header">
      <h2 class="section-title">Noticias Destacadas</h2>
      <a href="/noticias/" class="view-all">Ver todas las noticias</a>
    </div>
    
    <div class="featured-news">
      {latestNews && (
        <article class="main-story">
          <div class="story-image">
            <span class="story-placeholder">{latestNews.categoryInfo?.icon || 'üì∞'}</span>
          </div>
          <div class="story-content">
            <div class="story-meta">
              <span class="story-category" style={`background: ${latestNews.categoryInfo?.color}`}>
                {latestNews.categoryInfo?.name}
              </span>
              <span>{formatDate(latestNews.date)}</span>
              <span>{latestNews.author}</span>
            </div>
            <h3 class="story-title">{latestNews.title}</h3>
            <p class="story-excerpt">{latestNews.excerpt}</p>
            <a href={latestNews.url} class="story-link">
              Leer noticia completa
            </a>
          </div>
        </article>
      )}
      
      <div class="secondary-stories">
        {secondaryNews.map(news => (
          <article class="secondary-story">
            <div class="story-meta">
              <span class="story-category" style={`background: ${news.categoryInfo?.color}`}>
                {news.categoryInfo?.name}
              </span>
              <span>{formatDate(news.date)}</span>
            </div>
            <h3 class="story-title">{news.title}</h3>
            <p class="story-excerpt">{news.excerpt.substring(0, 120)}...</p>
            <a href={news.url} class="story-link">
              Leer m√°s
            </a>
          </article>
        ))}
      </div>
    </div>
    
    <div class="news-grid">
      {additionalNews.map(news => (
        <article class="news-card">
          <div class="story-image">
            <span class="story-placeholder">{news.categoryInfo?.icon || 'üì∞'}</span>
          </div>
          <div class="story-content">
            <div class="story-meta">
              <span class="story-category" style={`background: ${news.categoryInfo?.color}`}>
                {news.categoryInfo?.name}
              </span>
              <span>{formatDate(news.date)}</span>
              <span>{news.author}</span>
            </div>
            <h3 class="story-title">{news.title}</h3>
            <p class="story-excerpt">{news.excerpt}</p>
            <a href={news.url} class="story-link">
              Leer noticia
            </a>
          </div>
        </article>
      ))}
    </div>
  </section>

  <!-- Donations Section -->
  <section class="security-section" id="donaciones">
    <div class="security-content">
      <h2 class="security-title">Apoya el Periodismo Independiente</h2>
      <p class="security-desc">
        Corvus News es un medio completamente independiente que no recibe financiamiento 
        de gobiernos, partidos pol√≠ticos o grandes corporaciones. Tu apoyo nos permite mantener 
        nuestra independencia editorial y continuar con nuestras investigaciones que defienden 
        la soberan√≠a nacional.
      </p>
      
      <div class="security-features">
        <div class="security-feature">
          <span class="security-feature-text">100% Independiente</span>
        </div>
        <div class="security-feature">
          <span class="security-feature-text">Sin Compromisos Pol√≠ticos</span>
        </div>
        <div class="security-feature">
          <span class="security-feature-text">Transparencia Total</span>
        </div>
        <div class="security-feature">
          <span class="security-feature-text">Periodismo de Calidad</span>
        </div>
      </div>
      
      <div class="hero-actions" style="margin-top: 2rem;">
        <a href="/donaciones/" class="btn btn-primary">Realizar Donaci√≥n</a>
        <a href="#transparencia" class="btn btn-secondary">Ver Transparencia Financiera</a>
      </div>
    </div>
  </section>

  <!-- Sovereignty Section -->
  <section class="security-section" id="soberania">
    <div class="security-content">
      <h2 class="security-title">Periodismo por la Soberan√≠a Nacional</h2>
      <p class="security-desc">
        Creemos que un M√©xico soberano necesita ciudadanos informados. Nuestro periodismo 
        expone las amenazas internas y externas que comprometen nuestra independencia, 
        desde la corrupci√≥n que debilita nuestras instituciones hasta las influencias 
        for√°neas que buscan subordinar nuestras decisiones nacionales.
      </p>
      
      <div class="security-features">
        <div class="security-feature">
          <span class="security-feature-text">Investigaci√≥n Profunda</span>
        </div>
        <div class="security-feature">
          <span class="security-feature-text">Verificaci√≥n M√∫ltiple</span>
        </div>
        <div class="security-feature">
          <span class="security-feature-text">Fuentes Protegidas</span>
        </div>
        <div class="security-feature">
          <span class="security-feature-text">Transparencia Total</span>
        </div>
      </div>
      
      <div class="hero-actions" style="margin-top: 2rem;">
        <a href="/contacto/" class="btn btn-primary">Contactar Redacci√≥n</a>
        <a href="/noticias/" class="btn btn-secondary">Archivo de Investigaciones</a>
      </div>
    </div>
  </section>
</Layout>
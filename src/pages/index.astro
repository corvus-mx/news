---
import Layout from '../layouts/Layout.astro';
import { getAllNews, getLatestNews, formatDate } from '../utils/newsUtils.js';

const latestNews = await getLatestNews();
const allNews = await getAllNews();
const secondaryNews = allNews.slice(1, 4);
const additionalNews = allNews.slice(4, 7);
---

<Layout title="Corvus News · Periodismo Independiente y Riguroso">
  <br/><br/>
  
  <!-- Hero Section -->
  <section class="hero">
    <div class="hero-badge">
      Periodismo Independiente · Fundado en 2025
    </div>
    
    <h1 class="hero-title">
      Periodismo Independiente<br>
      y Riguroso
    </h1>
    
    <p class="hero-subtitle">
      Investigamos, verificamos y publicamos las historias que importan. 
      Nuestro compromiso es con la verdad, la transparencia y el periodismo 
      de calidad que la sociedad necesita.
    </p>
    
    <div class="hero-actions">
      <a href="/news/noticias/" class="btn btn-primary">
        Leer Noticias
      </a>
      <a href="#soberania" class="btn btn-secondary">
        Nuestra Misión
      </a>
    </div>
    
    <div class="trust-indicators">
      <div class="trust-card">
        <h3 class="trust-title">Periodismo Riguroso</h3>
        <p class="trust-desc">Cada investigación pasa por verificación exhaustiva y análisis profesional</p>
      </div>
      <div class="trust-card">
        <h3 class="trust-title">Independencia Total</h3>
        <p class="trust-desc">Sin compromisos políticos ni económicos. Solo la verdad y la información verificada</p>
      </div>
      <div class="trust-card">
        <h3 class="trust-title">Análisis Profundo</h3>
        <p class="trust-desc">Investigaciones detalladas que van más allá de la superficie de los hechos</p>
      </div>
      <div class="trust-card">
        <h3 class="trust-title">Transparencia Radical</h3>
        <p class="trust-desc">Metodología clara y proceso de verificación transparente en cada reportaje</p>
      </div>
    </div>
  </section>

  <!-- Featured News Section -->
  <section class="news-section">
    <div class="section-header">
      <h2 class="section-title">Noticias Destacadas</h2>
      <a href="/news/noticias/" class="view-all">Ver todas las noticias</a>
    </div>
    
    <div class="featured-news">
      {latestNews && (
        <article class="main-story">
          <div class="story-image">
            {latestNews.image ? (
              <img src={latestNews.image} alt={latestNews.title} loading="lazy" />
            ) : (
              <span class="story-placeholder">Imagen no disponible</span>
            )}
          </div>
          <div class="story-content">
            <div class="story-meta">
              <span class="story-category" style={`background: ${latestNews.categoryInfo?.color}`}>
                {latestNews.categoryInfo?.name}
              </span>
              <span>{formatDate(latestNews.date)}</span>
              <span>{latestNews.author}</span>
            </div>
            <h3 class="story-title">{latestNews.title}</h3>
            <p class="story-excerpt">{latestNews.excerpt}</p>
            <a href={latestNews.url} class="story-link">
              Leer noticia completa
            </a>
          </div>
        </article>
      )}
      
      <div class="secondary-stories">
        {secondaryNews.map(news => (
          <article class="secondary-story">
            <div class="story-meta">
              <span class="story-category" style={`background: ${news.categoryInfo?.color}`}>
                {news.categoryInfo?.name}
              </span>
              <span>{formatDate(news.date)}</span>
            </div>
            <h3 class="story-title">{news.title}</h3>
            <p class="story-excerpt">{news.excerpt.substring(0, 120)}...</p>
            <a href={news.url} class="story-link">
              Leer más
            </a>
          </article>
        ))}
      </div>
    </div>
    
    <div class="news-grid">
      {additionalNews.map(news => (
        <article class="news-card">
          <div class="story-image">
            {news.image ? (
              <img src={news.image} alt={news.title} loading="lazy" />
            ) : (
              <span class="story-placeholder">Imagen no disponible</span>
            )}
          </div>
          <div class="story-content">
            <div class="story-meta">
              <span class="story-category" style={`background: ${news.categoryInfo?.color}`}>
                {news.categoryInfo?.name}
              </span>
              <span>{formatDate(news.date)}</span>
              <span>{news.author}</span>
            </div>
            <h3 class="story-title">{news.title}</h3>
            <p class="story-excerpt">{news.excerpt}</p>
            <a href={news.url} class="story-link">
              Leer noticia
            </a>
          </div>
        </article>
      ))}
    </div>
  </section>

  <!-- Donations Section -->
  <section class="security-section" id="donaciones">
    <div class="security-content">
      <h2 class="security-title">Apoya el Periodismo Independiente</h2>
      <p class="security-desc">
        Corvus News es completamente independiente. No recibimos financiamiento 
        de gobiernos, partidos políticos o grandes corporaciones. Tu apoyo nos permite 
        mantener nuestra independencia editorial y continuar con investigaciones 
        de calidad que la sociedad necesita.
      </p>
      
      <div class="security-features">
        <div class="security-feature">
          <span class="security-feature-text">100% Independiente</span>
        </div>
        <div class="security-feature">
          <span class="security-feature-text">Sin Compromisos Políticos</span>
        </div>
        <div class="security-feature">
          <span class="security-feature-text">Transparencia Total</span>
        </div>
        <div class="security-feature">
          <span class="security-feature-text">Periodismo de Calidad</span>
        </div>
      </div>
      
      <div class="hero-actions" style="margin-top: 2rem;">
        <a href="/news/donaciones/" class="btn btn-primary">Realizar Donación</a>
        <a href="#transparencia" class="btn btn-secondary">Ver Transparencia Financiera</a>
      </div>
    </div>
  </section>

  <!-- Sovereignty Section -->
  <section class="security-section" id="soberania">
    <div class="security-content">
      <h2 class="security-title">Compromiso con la Verdad</h2>
      <p class="security-desc">
        Una sociedad informada es una sociedad libre. Nuestro periodismo investiga 
        y expone los temas que afectan a la ciudadanía, desde la corrupción que 
        debilita las instituciones hasta los procesos que impactan la vida pública 
        y el bienestar social.
      </p>
      
      <div class="security-features">
        <div class="security-feature">
          <span class="security-feature-text">Investigación Profunda</span>
        </div>
        <div class="security-feature">
          <span class="security-feature-text">Verificación Múltiple</span>
        </div>
        <div class="security-feature">
          <span class="security-feature-text">Fuentes Protegidas</span>
        </div>
        <div class="security-feature">
          <span class="security-feature-text">Transparencia Total</span>
        </div>
      </div>
      
      <div class="hero-actions" style="margin-top: 2rem;">
        <a href="/news/contacto/" class="btn btn-primary">Contactar Redacción</a>
        <a href="/news/noticias/" class="btn btn-secondary">Archivo de Investigaciones</a>
      </div>
    </div>
  </section>
</Layout>